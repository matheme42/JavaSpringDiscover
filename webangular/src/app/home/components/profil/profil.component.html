<app-header></app-header>

<div class="flex flex-row">
    <div class="flex-grow">
        <div *ngIf="userForm$ | async as user"></div>
        <div class="form-card" *ngIf="errorMessage">
            <p>{{errorMessage}}</p>
        </div>
        <div class="form-card">
            <h2>Profil</h2>
            <form [formGroup]="userForm">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input id="username" type="text" formControlName="username">
                </div>
                <div class="form-group"
                    *ngIf="userForm.controls['username'].invalid && userForm.controls['username'].touched">
                    <p class="form-error">• Username is mandatory</p>
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input id="email" type="text" formControlName="email">
                </div>
                <div class="form-group"
                    *ngIf="userForm.controls['email'].invalid && userForm.controls['email'].touched">
                    <p *ngIf="userForm.controls['email'].errors?.['required']" class="form-error">• Email is mandatory
                    </p>
                    <p *ngIf="userForm.controls['email'].errors?.['email']" class="form-error">• Email malformated</p>
                </div>
                <div class="form-group">
                    <label for="image">Image</label>
                    <input id="image" type="text" formControlName="image">
                </div>
                <div class="action-buttons">
                    <button type="submit" (click)="onSubmitUserForm()" [disabled]="userForm.invalid">Modifier</button>
                </div>
            </form>
        </div>
    </div>

    <div class="flex-grow">
        <div *ngIf="userFormPassword$ | async as user"></div>
        <div class="form-card" *ngIf="errorMessagePassword">
            <p>{{errorMessagePassword}}</p>
        </div>
        <div class="form-card">
            <h2>Password</h2>
            <form [formGroup]="userFormPassword">
                <div class="form-group">
                    <label for="oldPassword">Old Password</label>
                    <input id="oldPassword" type="password" formControlName="oldPassword">
                </div>
                <div class="form-group"
                    *ngIf="userFormPassword.controls['oldPassword'].invalid && userFormPassword.controls['oldPassword'].touched">
                    <p class="form-error">• Old password is mandatory</p>
                </div>
                <div class="form-group">
                    <label for="newPassword">New Password</label>
                    <input id="newPassword" type="password" formControlName="newPassword">
                </div>
                <div class="form-group"
                    *ngIf="userFormPassword.controls['newPassword'].invalid && userFormPassword.controls['newPassword'].touched">
                    <p *ngIf="userFormPassword.controls['newPassword'].errors?.['required']" class="form-error">•
                        password is mandatory
                    </p>
                </div>
                <div class="action-buttons">
                    <button type="submit" (click)="onSubmituserFormPassword()"
                        [disabled]="userFormPassword.invalid">Modifier</button>
                </div>
            </form>
        </div>
    </div>
</div>